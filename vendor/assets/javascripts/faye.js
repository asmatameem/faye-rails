var Faye={VERSION:"1.0.0",BAYEUX_VERSION:"1.0",ID_LENGTH:160,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"],ENV:typeof window!=="undefined"?window:global,extend:function(e,t,n){if(!t)return e;for(var r in t){if(!t.hasOwnProperty(r))continue;if(e.hasOwnProperty(r)&&n===false)continue;if(e[r]!==t[r])e[r]=t[r]}return e},random:function(e){e=e||this.ID_LENGTH;return csprng(e,36)},clientIdFromMessages:function(e){var t=this.filter([].concat(e),function(e){return e.channel==="/meta/connect"});return t[0]&&t[0].clientId},copyObject:function(e){var t,n,r;if(e instanceof Array){t=[];n=e.length;while(n--)t[n]=Faye.copyObject(e[n]);return t}else if(typeof e==="object"){t=e===null?null:{};for(r in e)t[r]=Faye.copyObject(e[r]);return t}else{return e}},commonElement:function(e,t){for(var n=0,r=e.length;n<r;n++){if(this.indexOf(t,e[n])!==-1)return e[n]}return null},indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++){if(e[n]===t)return n}return-1},map:function(e,t,n){if(e.map)return e.map(t,n);var r=[];if(e instanceof Array){for(var i=0,s=e.length;i<s;i++){r.push(t.call(n||null,e[i],i))}}else{for(var o in e){if(!e.hasOwnProperty(o))continue;r.push(t.call(n||null,o,e[o]))}}return r},filter:function(e,t,n){if(e.filter)return e.filter(t,n);var r=[];for(var i=0,s=e.length;i<s;i++){if(t.call(n||null,e[i],i))r.push(e[i])}return r},asyncEach:function(e,t,n,r){var i=e.length,s=-1,o=0,u=false;var a=function(){o-=1;s+=1;if(s===i)return n&&n.call(r);t(e[s],l)};var f=function(){if(u)return;u=true;while(o>0)a();u=false};var l=function(){o+=1;f()};l()},toJSON:function(e){if(!this.stringify)return JSON.stringify(e);return this.stringify(e,function(e,t){return this[e]instanceof Array?this[e]:t})}};if(typeof module!=="undefined")module.exports=Faye;else if(typeof window!=="undefined")window.Faye=Faye